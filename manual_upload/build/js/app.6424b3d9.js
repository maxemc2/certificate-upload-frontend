(function(){"use strict";var t={6083:function(t,e,i){var a=i(9242),l=i(678),n=i(3396),o=i(7139);const s={class:"claim-list"},r=(0,n._)("div",{class:"section-title"},[(0,n._)("span",{class:"title"},"理賠申請清單")],-1),d={class:"claim-filter d-flex align-items-center"},c={class:"tab-btns"},u={class:"search-bar ms-auto"},h={class:"grouped-input d-flex align-items-center"},m=(0,n._)("i",{class:"bi bi-x-circle-fill"},null,-1),p=[m],f={class:"claim-table"},b={border:"0"},_=(0,n._)("tr",null,[(0,n._)("th",null,"理賠單號"),(0,n._)("th",null,"保戶身分證號"),(0,n._)("th",null,"授權期間"),(0,n._)("th",null,"申請時間"),(0,n._)("th",null,"上傳時間"),(0,n._)("th")],-1),g={key:0},v={key:1},k={key:2,class:"btn-td"},w=["onClick"],y=(0,n._)("i",{class:"bi bi-arrow-up-circle"},null,-1),M=(0,n.Uk)("上傳檔案"),D=[y,M],C={key:3,class:"btn-td"},I=["onClick"],z=(0,n._)("i",{class:"bi bi-eye-fill"},null,-1),S=(0,n.Uk)("檢視"),L=[z,S];function F(t,e,i,l,m,y){return(0,n.wg)(),(0,n.iD)("section",s,[r,(0,n._)("div",d,[(0,n._)("div",c,[(0,n._)("button",{type:"button",class:(0,o.C_)(["tab-btn",{active:"全部"==m.state}]),onClick:e[0]||(e[0]=t=>y.changeState("全部"))},"全部",2),(0,n._)("button",{type:"button",class:(0,o.C_)(["tab-btn",{active:"未上傳"==m.state}]),onClick:e[1]||(e[1]=t=>y.changeState("未上傳"))},"未上傳",2),(0,n._)("button",{type:"button",class:(0,o.C_)(["tab-btn",{active:"已上傳"==m.state}]),onClick:e[2]||(e[2]=t=>y.changeState("已上傳"))},"已上傳",2)]),(0,n._)("div",u,[(0,n._)("div",h,[(0,n.wy)((0,n._)("input",{type:"text",class:"text-input",id:"search-condition",placeholder:"搜尋理賠單號、身份證號","onUpdate:modelValue":e[3]||(e[3]=t=>m.condition=t)},null,512),[[a.nr,m.condition,void 0,{lazy:!0}]]),(0,n._)("button",{class:"clear-btn ms-auto",onClick:e[4]||(e[4]=t=>m.condition="")},p)])])]),(0,n._)("div",f,[(0,n._)("table",b,[_,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(y.filteredClaimList,((t,e)=>((0,n.wg)(),(0,n.iD)("tr",{key:e},[(0,n._)("td",null,(0,o.zw)(t.claim),1),(0,n._)("td",null,(0,o.zw)(t.id_number),1),(0,n._)("td",null,(0,o.zw)(t.authorizedDate),1),(0,n._)("td",null,(0,o.zw)(t.applyDate),1),""==t.uploadDate?((0,n.wg)(),(0,n.iD)("td",g,"-")):((0,n.wg)(),(0,n.iD)("td",v,(0,o.zw)(t.uploadDate),1)),""==t.uploadDate?((0,n.wg)(),(0,n.iD)("td",k,[(0,n._)("button",{class:"green-btn-bg download-btn",onClick:e=>y.goUploadPage(t)},D,8,w)])):((0,n.wg)(),(0,n.iD)("td",C,[(0,n._)("button",{class:"green-btn-border-text view-btn",onClick:e=>y.goDetailPage(t)},L,8,I)]))])))),128))])])])}i(6699);const U=(t,e=!1)=>(t=t.trim(),e?[...document.querySelectorAll(t)]:document.querySelector(t)),x=(t,e,i,a=!1)=>{let l=U(e,a);l&&(a?l.forEach((e=>e.addEventListener(t,i))):l.addEventListener(t,i))},H=(t,e)=>{t.addEventListener("scroll",e)};var O=i(8937),$=i(6265),T=i.n($),V={name:"ClaimApplyList",props:{msg:String},data(){return{claimList:[],state:"全部",condition:"",recorderInfo:"",reminderInfo:{img:"",topic:"",text:"",checkButton:"green-btn-bg"}}},emits:["updateData"],methods:{changeState(t){this.state=t},sortClaimList(t){return t.sort((function(t,e){var i=new Date(t.applyDate),a=new Date(e.applyDate);return a-i}))},goUploadPage(t){this.$router.push({name:"uploadFile",params:{claim:t.claim,id_number:t.id_number,authorizedDate:t.authorizedDate,authorizationCertificate:t.authorizationCertificate,division:t.details.authorizationContent.division,type:t.details.authorizationContent.type}})},goDetailPage(t){this.$router.push({name:"viewFile",params:{claim:t.claim,id_number:t.id_number,authorizedDate:t.authorizedDate,uploadDate:t.uploadDate,authorizationCertificate:t.authorizationCertificate}})}},computed:{filteredClaimList:function(){var t,e,i=this.claimList,a=this.state,l=this.condition;return""!=l&&(i=i.filter((function(t){if(t.claim.includes(l)||t.id_number.includes(l))return t}))),"未上傳"==a?(t=i.filter((function(t){if(""==t.uploadDate)return t})),this.sortClaimList(t)):"已上傳"==a?(e=i.filter((function(t){if(t.uploadDate.length>=8)return t})),this.sortClaimList(e)):(t=i.filter((function(t){if(""==t.uploadDate)return t})),e=i.filter((function(t){if(t.uploadDate.length>=8)return t})),this.sortClaimList(t).concat(this.sortClaimList(e)))}},mounted(){let t=U(".claim-list .tab-btns .btn",!0);x("click","#medical-certificate .tab-btns .btn",(function(e){t.forEach((function(t){t.classList.remove("active")})),this.classList.add("active")}),!0);var e="https://60.249.237.182:443",i={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"false"};T().post(e+"/prod/get_claims",{id_number:""},{headers:i}).then((t=>{t=t.data,t&&"claims"in t&&(this.claimList=t.claims)})).catch((t=>console.log(t)))},beforeUpdate(){}},Y=i(89);const j=(0,Y.Z)(V,[["render",F]]);var E=j,q=i.p+"img/file-icon.74678d24.svg",B=i.p+"img/send-icon.f37e301d.svg";const N={class:"return-block"},P=(0,n._)("i",{class:"bi bi-arrow-left-circle"},null,-1),A=(0,n.Uk)("返回"),K=[P,A],Z={class:"section-title title-block d-flex align-items-center"},G={class:"title"},J={class:"ms-auto"},W={class:"green-btn-bg view-btn"},Q=["href"],R=(0,n._)("img",{src:q},null,-1),X=(0,n._)("span",null,"檢視授權書",-1),tt=[R,X],et={class:"info-block"},it={class:"state-block"},at={class:"form-check"},lt=(0,n._)("label",{class:"form-check-label",for:"claimState1"}," 有此保戶及區間就診資料 ",-1),nt={class:"form-check"},ot=(0,n._)("label",{class:"form-check-label",for:"claimState2"},[(0,n.Uk)(" 查無此病人"),(0,n._)("span",null,"（將不會上傳任何檔案）")],-1),st={class:"form-check"},rt=(0,n._)("label",{class:"form-check-label",for:"claimState3"},[(0,n.Uk)(" 此授權區間無就醫紀錄"),(0,n._)("span",null,"（將不會上傳任何檔案）")],-1),dt={key:0,class:"certificate-block"},ct={border:"0"},ut=(0,n._)("tr",null,[(0,n._)("th",null,"科別"),(0,n._)("th",null,"證書類別"),(0,n._)("th")],-1),ht=["rowspan"],mt=(0,n._)("br",null,null,-1),pt={class:"type-col"},ft={class:"btn-col"},bt=["onChange"],_t={class:"send-block"},gt=(0,n._)("img",{src:B},null,-1),vt=(0,n._)("span",null,"送出",-1),kt=[gt,vt],wt={class:"modal fade",id:"checkModal",tabindex:"-1","aria-labelledby":"checkModal","aria-hidden":"true"},yt={class:"modal-dialog"},Mt={class:"modal-content"},Dt=["innerHTML"],Ct=["innerHTML"],It={class:"modal-footer"},zt={class:"modal fade",id:"reminderModal",tabindex:"-1","aria-labelledby":"reminderModal","aria-hidden":"true"},St={class:"modal-dialog"},Lt={class:"modal-content"},Ft={class:"modal-header"},Ut={key:0,class:"modal-body"},xt=(0,n.Uk)(" 將於 "),Ht=(0,n.Uk)(" 後自動跳轉主頁 "),Ot=["innerHTML"],$t={class:"modal-footer"},Tt={key:1,type:"button",class:"btn green-btn-bg","data-bs-dismiss":"modal"};function Vt(t,e,i,l,s,r){return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("section",null,[(0,n._)("div",N,[(0,n._)("button",{class:"green-btn-text return-btn",onClick:e[0]||(e[0]=t=>r.goBackCheck())},K)]),(0,n._)("div",Z,[(0,n._)("div",null,[(0,n._)("span",G,"理賠單號："+(0,o.zw)(s.claimId),1)]),(0,n._)("div",J,[(0,n._)("button",W,[(0,n._)("a",{href:s.authorizationUrl,target:"_blank"},tt,8,Q)])])]),(0,n._)("div",et,[(0,n._)("p",null,"保戶身分證號："+(0,o.zw)(s.userId),1),(0,n._)("p",null,"授權期間："+(0,o.zw)(s.authorizedDate),1)]),(0,n._)("div",it,[(0,n._)("div",at,[(0,n.wy)((0,n._)("input",{class:"form-check-input",type:"radio",name:"claimState",id:"claimState1",value:"正常","onUpdate:modelValue":e[1]||(e[1]=t=>s.state=t),checked:""},null,512),[[a.G2,s.state]]),lt]),(0,n._)("div",nt,[(0,n.wy)((0,n._)("input",{class:"form-check-input",type:"radio",name:"claimState",id:"claimState2",value:"人找不到","onUpdate:modelValue":e[2]||(e[2]=t=>s.state=t)},null,512),[[a.G2,s.state]]),ot]),(0,n._)("div",st,[(0,n.wy)((0,n._)("input",{class:"form-check-input",type:"radio",name:"claimState",id:"claimState3",value:"期間找不到","onUpdate:modelValue":e[3]||(e[3]=t=>s.state=t)},null,512),[[a.G2,s.state]]),rt])]),"正常"==s.state?((0,n.wg)(),(0,n.iD)("div",dt,[(0,n._)("table",ct,[ut,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.fileField.type,((t,e,i)=>((0,n.wg)(),(0,n.iD)("tr",{key:e},[0==i?((0,n.wg)(),(0,n.iD)("td",{key:0,rowspan:Object.keys(s.fileField.type).length,class:"department-col"},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.fileField.division,((t,e)=>((0,n.wg)(),(0,n.iD)(n.HY,{key:e},[(0,n.Uk)((0,o.zw)(t),1),mt],64)))),128))],8,ht)):(0,n.kq)("",!0),(0,n._)("td",pt,(0,o.zw)(e),1),(0,n._)("td",ft,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t,((t,i)=>((0,n.wg)(),(0,n.iD)("input",{key:i,type:"file",accept:"application/pdf",class:"green-btn-border-text",onChange:t=>r.getFile(t,e)},null,40,bt)))),128))])])))),128))])])):(0,n.kq)("",!0),(0,n._)("div",_t,[(0,n._)("button",{class:"green-btn-bg send-btn",onClick:e[4]||(e[4]=t=>r.sendCheck())},kt)])]),(0,n._)("div",wt,[(0,n._)("div",yt,[(0,n._)("div",Mt,[(0,n._)("div",{class:"modal-header",innerHTML:s.checkModal.title},null,8,Dt),(0,n._)("div",{class:"modal-body",innerHTML:s.checkModal.content},null,8,Ct),(0,n._)("div",It,[(0,n._)("button",{type:"button",class:(0,o.C_)(["btn",{"green-btn-border-text":"green"==s.checkModal.btnColor,"red-btn-border-text":"red"==s.checkModal.btnColor}]),"data-bs-dismiss":"modal"}," 取消",2),"green"==s.checkModal.btnColor?((0,n.wg)(),(0,n.iD)("button",{key:0,type:"button",class:"btn green-btn-bg","data-bs-dismiss":"modal",onClick:e[5]||(e[5]=t=>r.sendFile())},"送出")):"red"==s.checkModal.btnColor?((0,n.wg)(),(0,n.iD)("button",{key:1,type:"button",class:"btn red-btn-bg","data-bs-dismiss":"modal",onClick:e[6]||(e[6]=t=>r.goBack())},"離開")):(0,n.kq)("",!0)])])])]),(0,n._)("div",zt,[(0,n._)("div",St,[(0,n._)("div",Lt,[(0,n._)("div",Ft,(0,o.zw)(s.reminderModal.title),1),"success"==s.reminderModal.state?((0,n.wg)(),(0,n.iD)("div",Ut,[xt,(0,n._)("span",null,(0,o.zw)(s.timeVal)+" 秒",1),Ht])):((0,n.wg)(),(0,n.iD)("div",{key:1,class:"modal-body",innerHTML:s.reminderModal.content},null,8,Ot)),(0,n._)("div",$t,["success"==s.reminderModal.state?((0,n.wg)(),(0,n.iD)("button",{key:0,type:"button",class:"btn green-btn-bg","data-bs-dismiss":"modal",onClick:e[7]||(e[7]=t=>r.goBack())},"返回清單")):"fail"==s.reminderModal.state?((0,n.wg)(),(0,n.iD)("button",Tt,"確認")):(0,n.kq)("",!0)])])])])],64)}var Yt={name:"UploadFile",data(){return{claimId:"",userId:"",authorizedDate:"",authorizationUrl:"",fileField:{division:[],type:{}},state:"正常",fileInfo:[],files:[],checkModal:{title:"",content:"",btnColor:""},reminderModal:{title:"",content:"",state:"success"},currentModal:null,timeVal:5,timeInterval:null,isStart:!1}},props:["id","records"],emits:["updateData"],methods:{changeState(t){this.state=t},goBackCheck(){this.files.length>0?(this.currentModal=new O.u_(U("#checkModal")),this.checkModal.title="離開頁面",this.checkModal.content="尚有未儲存資料，離開後需重新上傳",this.checkModal.btnColor="red",this.currentModal.show()):this.$router.push({name:"claimList"})},goBack(){this.countStop(),this.$router.push({name:"claimList"})},getFile(t,e,i="不分科"){for(var a=t.target.files,l=0;l<a.length;l++){var n=a[l].name,o=n.lastIndexOf(".");if(-1!=o){var s=n.substr(o+1).toLowerCase();"pdf"==s&&(this.files.push(a[l]),e.includes("診斷書")?this.fileInfo.push({pdf_type:"diagnosis",division:i,fileName:n}):e.includes("門診+急診收據")?this.fileInfo.push({pdf_type:"outpatient_receipt",division:i,fileName:n}):e.includes("住院收據")&&this.fileInfo.push({pdf_type:"inpatient_receipt",division:i,fileName:n}))}}this.fileField.type[e].push("file")},sendCheck(){this.currentModal=new O.u_(U("#checkModal")),"正常"==this.state?this.files.length>0?(this.checkModal.title="送出理賠證書檔案",this.checkModal.content="沒有選擇檔案之項目，將紀錄此保戶無符合的就診紀錄"):(this.checkModal.title="尚未選擇任何檔案，是否送出理賠申請？",this.checkModal.content="將紀錄此保戶無符合的就診紀錄"):"人找不到"==this.state?(this.checkModal.title="已勾選<span>查無此身份證號</span>，是否送出理賠申請？",this.checkModal.content="將不會上傳任何檔案"):"期間找不到"==this.state&&(this.checkModal.title="已勾選<span>查無區間就診資料</span>，是否送出理賠申請？",this.checkModal.content="將不會上傳任何檔案"),this.checkModal.btnColor="green",this.currentModal.show()},sendFile(){var t="https://60.249.237.182:443",e=new FormData,i="",a={"Content-Type":"multipart/form-data"};this.currentModal=new O.u_(U("#reminderModal")),e.append("claim",this.claimId);for(var l=0;l<this.fileInfo.length;l++)i=0==l?i.concat(JSON.stringify(this.fileInfo[l])):i.concat(", ",JSON.stringify(this.fileInfo[l]));e.set("file_info",i);for(l=0;l<this.files.length;l++)e.append("files",this.files[l]);switch(this.state){case"正常":break;case"人找不到":e.append("error_code",2);break;case"期間找不到":e.append("error_code",1);break;default:e.append("error_code",0);break}T().post(t+"/prod/upload",e,{headers:a}).then((t=>{t=t.data,"正常"==this.state?t&&1==t?(this.reminderModal.state="success",this.reminderModal.title="送出成功",this.reminderModal.content="將於 <span>5 秒</span> 後自動跳轉主頁",this.countStart()):(this.reminderModal.state="fail",this.reminderModal.title="送出失敗，請重新嘗試",this.reminderModal.content=""):(this.reminderModal.state="success",this.reminderModal.title="送出成功",this.reminderModal.content="將於 <span>5 秒</span> 後自動跳轉主頁",this.countStart()),this.currentModal.show()})).catch((t=>console.log(t)))},countStart(){this.timeVal=5,this.timeInterval=setInterval(this.countDown,1e3),this.isStart=!0},countDown(){this.timeVal=this.timeVal-1,0===this.timeVal&&this.countFinish()},countFinish(){this.countStop(),this.currentModal.hide(),this.$router.push({name:"claimList"})},countStop(){clearInterval(this.timeInterval),this.isStart=!1}},computed:{},mounted(){this.claimId=this.$route.params.claim,this.userId=this.$route.params.id_number,this.authorizedDate=this.$route.params.authorizedDate,this.authorizationUrl=this.$route.params.authorizationCertificate,this.$route.params.division.forEach((t=>{this.fileField.division.push(t)})),this.$route.params.type.forEach((t=>{switch(t){case"diagnosis":this.fileField.type["診斷書"]=[],this.fileField.type["診斷書"].push("file");break;case"inpatient_receipt":this.fileField.type["住院收據"]=[],this.fileField.type["住院收據"].push("file");break;case"outpatient_receipt":case"emergency_receipt":this.fileField.type["門診+急診收據"]=[],this.fileField.type["門診+急診收據"].push("file");break}})),console.log(this.$route.params,this.fileField)},beforeUpdate(){}};const jt=(0,Y.Z)(Yt,[["render",Vt]]);var Et=jt,qt=i.p+"img/delete-icon.0f16dda8.svg";const Bt={class:"return-block"},Nt=(0,n._)("i",{class:"bi bi-arrow-left-circle"},null,-1),Pt=(0,n.Uk)("返回"),At=[Nt,Pt],Kt={class:"section-title title-block d-flex align-items-center"},Zt={class:"title"},Gt={class:"ms-auto"},Jt={class:"green-btn-bg view-btn"},Wt=["href"],Qt=(0,n._)("img",{src:q},null,-1),Rt=(0,n._)("span",null,"檢視授權書",-1),Xt=[Qt,Rt],te={class:"info-block"},ee={class:"clear-block"},ie={key:0,class:"reminder-text"},ae=["disabled"],le=(0,n._)("img",{src:qt},null,-1),ne=(0,n._)("span",null,"清除資料",-1),oe=[le,ne],se={class:"certificate-block"},re={border:"0"},de=(0,n._)("tr",null,[(0,n._)("th",null,"科別"),(0,n._)("th",null,"證書類別"),(0,n._)("th")],-1),ce=["rowspan"],ue={class:"type-col"},he={class:"file-col"},me=(0,n.Uk)(" 無符合的就診紀錄 "),pe=["value"],fe=["href"],be={class:"modal fade",id:"checkModal",tabindex:"-1","aria-labelledby":"checkModal","aria-hidden":"true"},_e={class:"modal-dialog"},ge={class:"modal-content"},ve=["innerHTML"],ke=["innerHTML"],we={key:1,class:"modal-body"},ye=(0,n.Uk)(" 將於 "),Me=(0,n.Uk)(" 後自動跳轉主頁 "),De={class:"modal-footer"},Ce={key:0,type:"button",class:"btn red-btn-border-text","data-bs-dismiss":"modal"},Ie={class:"modal fade",id:"reminderModal",tabindex:"-1","aria-labelledby":"reminderModal","aria-hidden":"true"},ze={class:"modal-dialog"},Se={class:"modal-content"},Le={class:"modal-header"},Fe=["innerHTML"],Ue=(0,n._)("div",{class:"modal-footer"},[(0,n._)("button",{type:"button",class:"btn green-btn-bg","data-bs-dismiss":"modal"},"確認")],-1);function xe(t,e,i,a,l,s){return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("section",null,[(0,n._)("div",Bt,[(0,n._)("button",{class:"green-btn-text return-btn",onClick:e[0]||(e[0]=t=>s.goBack())},At)]),(0,n._)("div",Kt,[(0,n._)("div",null,[(0,n._)("span",Zt,"理賠單號："+(0,o.zw)(l.claimId),1)]),(0,n._)("div",Gt,[(0,n._)("button",Jt,[(0,n._)("a",{href:l.authorizationUrl,target:"_blank"},Xt,8,Wt)])])]),(0,n._)("div",te,[(0,n._)("p",null,"上傳時間："+(0,o.zw)(l.uploadDate),1),(0,n._)("p",null,"保戶身分證號："+(0,o.zw)(l.userId),1),(0,n._)("p",null,"授權期間："+(0,o.zw)(l.authorizedDate),1)]),(0,n._)("div",ee,[1==l.downloadFlag?((0,n.wg)(),(0,n.iD)("span",ie,"保險單位已下載理賠清單，無法清除資料")):(0,n.kq)("",!0),(0,n._)("button",{class:"red-btn-border-text clear-btn",onClick:e[1]||(e[1]=t=>s.clearCheck()),disabled:1==l.downloadFlag},oe,8,ae)]),(0,n._)("div",se,[(0,n._)("table",re,[de,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.fileInfo,((t,e)=>((0,n.wg)(),(0,n.iD)(n.HY,{key:e},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t,((i,a,l)=>((0,n.wg)(),(0,n.iD)("tr",{key:l},[0==l?((0,n.wg)(),(0,n.iD)("td",{key:0,rowspan:Object.keys(t).length,class:"department-col"},(0,o.zw)(e),9,ce)):(0,n.kq)("",!0),(0,n._)("td",ue,(0,o.zw)(a),1),(0,n._)("td",he,[0==Object.keys(i).length?((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[me],64)):((0,n.wg)(!0),(0,n.iD)(n.HY,{key:1},(0,n.Ko)(i,((t,e)=>((0,n.wg)(),(0,n.iD)("div",{key:t.pdfUrl,value:e},[(0,n._)("a",{class:"file-link",href:t.pdfUrl,target:"_blank"},(0,o.zw)(t.fileName),9,fe)],8,pe)))),128))])])))),128))],64)))),128))])])]),(0,n._)("div",be,[(0,n._)("div",_e,[(0,n._)("div",ge,[(0,n._)("div",{class:"modal-header",innerHTML:l.checkModal.title},null,8,ve),"red"==l.checkModal.btnColor?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"modal-body",innerHTML:l.checkModal.content},null,8,ke)):"green"==l.checkModal.btnColor?((0,n.wg)(),(0,n.iD)("div",we,[ye,(0,n._)("span",null,(0,o.zw)(l.timeVal)+" 秒",1),Me])):(0,n.kq)("",!0),(0,n._)("div",De,["red"==l.checkModal.btnColor?((0,n.wg)(),(0,n.iD)("button",Ce,"取消")):(0,n.kq)("",!0),"red"==l.checkModal.btnColor?((0,n.wg)(),(0,n.iD)("button",{key:1,type:"button",class:"btn red-btn-bg","data-bs-dismiss":"modal",onClick:e[2]||(e[2]=t=>s.clearFile())},"清除")):"green"==l.checkModal.btnColor?((0,n.wg)(),(0,n.iD)("button",{key:2,type:"button",class:"btn green-btn-bg","data-bs-dismiss":"modal",onClick:e[3]||(e[3]=t=>s.goBack())},"返回清單")):(0,n.kq)("",!0)])])])]),(0,n._)("div",Ie,[(0,n._)("div",ze,[(0,n._)("div",Se,[(0,n._)("div",Le,(0,o.zw)(l.reminderModal.title),1),(0,n._)("div",{class:"modal-body",innerHTML:l.reminderModal.content},null,8,Fe),Ue])])])],64)}var He={name:"ViewFile",data(){return{claimId:"",userId:"",authorizedDate:"",uploadDate:"",authorizationUrl:"",fileInfo:{},downloadFlag:0,checkModal:{title:"",content:"",btnColor:""},reminderModal:{title:"",content:""},currentModal:null,timeVal:5,timeInterval:null,isStart:!1}},props:["id","records"],emits:["updateData"],methods:{goBack(){this.countStop(),this.$router.push({name:"claimList"})},reload(){this.countStop(),this.fileInfo={},this.$router.push({name:"viewFile",params:{claim:this.claimId,id_number:this.userId,authorizedDate:this.authorizedDate,uploadDate:this.uploadDate,authorizationCertificate:this.authorizationUrl}})},clearCheck(){this.currentModal=new O.u_(U("#checkModal")),this.checkModal.title="清除所有已上傳資料",this.checkModal.content="理賠申請將變更為「未上傳」狀態，您可以重新上傳資料",this.checkModal.btnColor="red",this.currentModal.show()},clearFile(){var t="https://60.249.237.182:443";T()["delete"](t+"/prod/del_claim",{data:{claim_number:this.claimId}}).then((t=>{t=t.data,t&&1==t?(this.currentModal=new O.u_(U("#checkModal")),this.checkModal.title="清除資料成功",this.checkModal.content="將於 <span>5 秒</span> 後自動跳轉主頁",this.checkModal.btnColor="green",this.countStart(),this.currentModal.show()):(this.currentModal=new O.u_(U("#reminderModal")),this.reminderModal.title="清除資料失敗，請重新嘗試",this.reminderModal.content="",this.currentModal.show())})).catch((t=>console.log("error",t)))},countStart(){this.timeVal=5,this.timeInterval=setInterval(this.countDown,1e3),this.isStart=!0},countDown(){this.timeVal=this.timeVal-1,0===this.timeVal&&this.countFinish()},countFinish(){this.countStop(),this.currentModal.hide(),this.$router.push({name:"claimList"})},countStop(){clearInterval(this.timeInterval),this.isStart=!1}},computed:{},mounted(){var t="https://60.249.237.182:443";this.claimId=this.$route.params.claim,this.userId=this.$route.params.id_number,this.authorizedDate=this.$route.params.authorizedDate,this.uploadDate=this.$route.params.uploadDate,this.authorizationUrl=this.$route.params.authorizationCertificate,T().post(t+"/prod/get_url",{claim_number:this.claimId}).then((t=>{if(t=t.data,void 0!==t.download_flag&&(this.downloadFlag=t.download_flag),t&&t.claims.length>0)for(var e=0;e<t.claims.length;e++){var i=t.claims[e],a=i.file_name.length>30?i.file_name.substring(0,30)+"~.pdf":i.file_name;i.pdf_type.includes("diagnosis")?(i.division in this.fileInfo||(this.fileInfo[i.division]={}),"診斷書"in this.fileInfo[i.division]||(this.fileInfo[i.division]["診斷書"]=[]),this.fileInfo[i.division]["診斷書"].push({fileName:a,pdfUrl:i.pdfUrl})):i.pdf_type.includes("inpatient_receipt")?(i.division in this.fileInfo||(this.fileInfo[i.division]={}),"住院收據"in this.fileInfo[i.division]||(this.fileInfo[i.division]["住院收據"]=[]),this.fileInfo[i.division]["住院收據"].push({fileName:a,pdfUrl:i.pdfUrl})):i.pdf_type.includes("outpatient_receipt")&&(i.division in this.fileInfo||(this.fileInfo[i.division]={}),"門診+急診收據"in this.fileInfo[i.division]||(this.fileInfo[i.division]["門診+急診收據"]=[]),this.fileInfo[i.division]["門診+急診收據"].push({fileName:a,pdfUrl:i.pdfUrl}))}})).catch((t=>console.log(t)))}};const Oe=(0,Y.Z)(He,[["render",xe]]);var $e=Oe;const Te=(0,l.p7)({history:(0,l.PO)(),routes:[{name:"claimList",path:"/",component:E},{name:"uploadFile",path:"/upload",component:Et},{name:"viewFile",path:"/detail",component:$e}]});var Ve=i.p+"img/logo.43608364.svg";const Ye=(0,n.uE)('<header id="header" class="fixed-top"><div class="container-xl d-flex align-items-center"><div class="logo"><a href="#"><img src="'+Ve+'">奇美醫院醫療數位證明人工上傳系統</a></div><div class="user-name ms-auto">王小明</div></div></header>',1),je={id:"main",class:"container"},Ee=(0,n.uE)('<footer id="footer"><div class="container d-flex justify-content-end"><div class="copyright"> 奇美醫院醫療數位證明服務 聯庭智能公司版權所有 </div></div></footer><div id="preloader"></div><a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>',3);function qe(t,e,i,a,l,o){const s=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)(n.HY,null,[Ye,(0,n._)("main",je,[(0,n.Wm)(s)]),Ee],64)}var Be={name:"App",data(){return{}},components:{ClaimApplyList:E},methods:{},computed:{},mounted(){let t=U("#preloader");t&&window.addEventListener("load",(()=>{t.style.display="none"}));let e=U(".back-to-top");if(e){const t=()=>{window.scrollY>100?e.classList.add("active"):e.classList.remove("active")};window.addEventListener("load",t),H(document,t)}}};const Ne=(0,Y.Z)(Be,[["render",qe]]);var Pe=Ne;i(9867);const Ae=(0,a.ri)(Pe);Ae.use(Te),Ae.mount("#app")}},e={};function i(a){var l=e[a];if(void 0!==l)return l.exports;var n=e[a]={exports:{}};return t[a](n,n.exports,i),n.exports}i.m=t,function(){var t=[];i.O=function(e,a,l,n){if(!a){var o=1/0;for(c=0;c<t.length;c++){a=t[c][0],l=t[c][1],n=t[c][2];for(var s=!0,r=0;r<a.length;r++)(!1&n||o>=n)&&Object.keys(i.O).every((function(t){return i.O[t](a[r])}))?a.splice(r--,1):(s=!1,n<o&&(o=n));if(s){t.splice(c--,1);var d=l();void 0!==d&&(e=d)}}return e}n=n||0;for(var c=t.length;c>0&&t[c-1][2]>n;c--)t[c]=t[c-1];t[c]=[a,l,n]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var a in e)i.o(e,a)&&!i.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){i.p="/"}(),function(){var t={143:0};i.O.j=function(e){return 0===t[e]};var e=function(e,a){var l,n,o=a[0],s=a[1],r=a[2],d=0;if(o.some((function(e){return 0!==t[e]}))){for(l in s)i.o(s,l)&&(i.m[l]=s[l]);if(r)var c=r(i)}for(e&&e(a);d<o.length;d++)n=o[d],i.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return i.O(c)},a=self["webpackChunkcertificate_upload_frontend"]=self["webpackChunkcertificate_upload_frontend"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=i.O(void 0,[998],(function(){return i(6083)}));a=i.O(a)})();
//# sourceMappingURL=app.6424b3d9.js.map